{% extends "base.html" %}
{% block content %}

<div class="container mt-4">

    <h3>ðŸ“„ Full Length Mock Test</h3>

    {% if submitted %}
    <div class="alert alert-success mt-3">
        Result: You scored {{ score }} out of {{ total }}
    </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        {% for q in questions %}
        <div class="card p-3 mb-3">

            <strong>
                Q{{ forloop.counter }}. {{ q.question }}
            </strong>
            <br><br>

            <!-- OPTION A -->
            <div
                {% if submitted %}
                    {% if q.correct_answer == "a" %}
                        style="color: green; font-weight: bold;"
                    {% elif submitted_answers.q.id == "a" %}
                        style="color: red;"
                    {% endif %}
                {% endif %}
            >
                <input type="radio"
                       name="q{{ q.id }}"
                       value="a"
                       {% if submitted %}disabled{% endif %}
                >
                {{ q.option_a }}
            </div>

            <!-- OPTION B -->
            <div
                {% if submitted %}
                    {% if q.correct_answer == "b" %}
                        style="color: green; font-weight: bold;"
                    {% elif submitted_answers.q.id == "b" %}
                        style="color: red;"
                    {% endif %}
                {% endif %}
            >
                <input type="radio"
                       name="q{{ q.id }}"
                       value="b"
                       {% if submitted %}disabled{% endif %}
                >
                {{ q.option_b }}
            </div>

            <!-- OPTION C -->
            <div
                {% if submitted %}
                    {% if q.correct_answer == "c" %}
                        style="color: green; font-weight: bold;"
                    {% elif submitted_answers.q.id == "c" %}
                        style="color: red;"
                    {% endif %}
                {% endif %}
            >
                <input type="radio"
                       name="q{{ q.id }}"
                       value="c"
                       {% if submitted %}disabled{% endif %}
                >
                {{ q.option_c }}
            </div>

            <!-- OPTION D -->
            <div
                {% if submitted %}
                    {% if q.correct_answer == "d" %}
                        style="color: green; font-weight: bold;"
                    {% elif submitted_answers.q.id == "d" %}
                        style="color: red;"
                    {% endif %}
                {% endif %}
            >
                <input type="radio"
                       name="q{{ q.id }}"
                       value="d"
                       {% if submitted %}disabled{% endif %}
                >
                {{ q.option_d }}
            </div>

        </div>
        {% endfor %}

        {% if not submitted %}
        <button type="submit" class="btn btn-danger">
            Submit Mock Test
        </button>
        {% endif %}

    </form>

</div>

{% endblock %}
